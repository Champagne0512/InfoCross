 InfoCross 校园信息破壁机 - 产品需求文档 (PRD) v1.0
项目名称	InfoCross (校园跨学科信息聚合与破壁平台)
文档状态	Draft (草稿)
技术核心	Supabase (BaaS) + Vue 3 + AI (LLM & Embedding)
目标用户	高校学生、社团/组织负责人、辅导员
1. 项目背景与目标
1.1 痛点分析
信息分散： 校园通知散落在教务处、公众号、班群，学生检索困难。
信息茧房： 推荐算法导致理工科学生看不到人文类讲座，阻碍跨学科交流。
内容冗长： 红头文件动辄几千字，学生阅读效率低。
1.2 产品目标
构建一个基于 Web 的信息聚合平台，利用 Supabase 作为全栈后端设施，结合 AI 大模型 实现信息的自动摘要、结构化提取，并通过 pgvector (向量检索) 实现跨学科的“破壁”推荐。
2. 系统架构与技术选型 (Supabase 特供版)
由于选择了 Supabase，架构将非常轻量化（Serverless）：
前端： Vue 3 + Element Plus + TailwindCSS
后端/数据库： Supabase
Auth： 处理用户注册/登录/鉴权。
Database (PostgreSQL)： 存储业务数据。
Storage： 存储海报图片、头像。
Realtime： 实现消息通知、点赞实时更新。
Edge Functions (边缘函数)： 核心逻辑区，用于调用 OpenAI/通义千问 API，处理敏感逻辑。
AI 引擎： 阿里云通义千问 (或 OpenAI) + Supabase pgvector (向量插件)。
3. 核心功能需求
3.1 用户模块 (Authentication)
功能描述： 支持学生通过邮箱注册登录。
Supabase 实现要点：
使用 Supabase Auth 模块。
配置 RLS (Row Level Security 行级安全策略)：确保用户只能修改自己的资料。
字段： 邮箱、密码、昵称、学院、专业、兴趣标签（Array）。
3.2 信息聚合与发布 (The Hub)
功能描述： 信息的录入源。
细分功能：
手动发布： 社团负责人上传海报、填写标题、正文。
AI 辅助发布（亮点）：
用户只需上传一张海报图片。
前端调用 Supabase Edge Function。
AI 识别图片文字 (OCR) -> 提取活动时间、地点、主题 -> 自动填表。
信息列表： 分页展示，支持筛选（学院、类型）。
3.3 AI 智能处理引擎 (The Brain) - 核心亮点
功能描述： 对每条入库的信息进行 AI 处理。
逻辑流程（后端 Edge Function 实现）：
自动摘要： 当新文章插入 DB 时，触发 Database Webhook 或 Edge Function，调用 LLM 生成 50 字摘要。
自动打标： AI 分析文本，打上 #人工智能 #创业 等标签。
向量化 (Embedding)：
调用 Embedding API 将文章标题+摘要转化为 向量数据 (Vector)。
存入 Supabase 的 embedding 字段（用于后续的相似度推荐）。
3.4 “破壁”推荐系统 (The Breaker)
功能描述： 首页的信息流推荐。
推荐算法逻辑：
本专业模式： 简单的 SQL 查询 (WHERE college = '计算机学院')。
破壁探索模式（利用 pgvector）：
获取用户的兴趣描述向量（如用户标签是“科幻电影”，转化为向量 A）。
在数据库中搜索与向量 A 距离最近 的文章（Cosine Similarity 余弦相似度）。
效果： 即使用户是学计算机的，也能精准推荐给他“物理学院的《三体》研讨会”。
3.5 互动与通知 (Interaction)
功能描述： 收藏、点赞、评论。
Supabase 实现要点：
使用 Supabase Realtime。当有人评论了你的帖子，右上角铃铛实时亮起红点，无需刷新页面。
4. 数据库设计 (Schema Design)
这是使用 Supabase 开发的基础。你需要在 Supabase 的 SQL Editor 中运行这些建表语句。
4.1 profiles (用户表)
与 Supabase 内置的 auth.users 表联动。
code
SQL
create table profiles (
  id uuid references auth.users not null primary key, -- 关联内置用户ID
  email text,
  username text,
  college text, -- 学院
  major text,   -- 专业
  tags text[],  -- 兴趣标签数组，如 ['AI', '摄影']
  avatar_url text
);
4.2 articles (信息主表)
开启 pgvector 插件支持向量搜索。
code
SQL
-- 启用向量扩展
create extension if not exists vector;

create table articles (
  id bigint generated by default as identity primary key,
  created_at timestamptz default now(),
  author_id uuid references profiles(id), -- 发布者
  title text not null,
  content text,           -- 原文详情
  summary text,           -- AI生成的摘要
  poster_url text,        -- 海报图片链接
  category text,          -- 分类：讲座/比赛/通知
  event_time timestamptz, -- 活动时间
  location text,          -- 活动地点
  tags text[],            -- AI提取的标签
  embedding vector(1536)  -- 【核心】存储AI生成的向量数据，用于推荐
);
4.3 interactions (互动表)
code
SQL
create table interactions (
  id bigint generated by default as identity primary key,
  user_id uuid references profiles(id),
  article_id bigint references articles(id),
  type text check (type in ('like', 'bookmark', 'join')), -- 点赞/收藏/报名
  created_at timestamptz default now()
);
5. API 接口与边缘函数规划
在 Supabase 中，你不需要写传统的 Controller。
CRUD 操作： 前端直接用 supabase-js 客户端库调用数据库（受 RLS 规则保护）。
复杂逻辑（AI）： 写在 Edge Functions (TypeScript) 里。
Edge Function 1: analyze-article
触发时机： 用户发布文章后。
输入： 文章标题、正文。
处理：
调用通义千问 API 生成摘要。
调用 Embedding API 生成向量。
输出： 更新该文章的 summary 和 embedding 字段。
Edge Function 2: recommend-articles
触发时机： 用户点击“探索模式”。
输入： 用户 ID。
处理：
获取用户的兴趣标签，转化为向量。
使用 RPC (Remote Procedure Call) 在数据库层进行向量相似度搜索。
输出： 推荐的文章列表 JSON。
6. 非功能性需求 (NFR)
安全性 (Security)：
必须开启 RLS (Row Level Security)。例如：articles 表对所有人只读 (SELECT)，但只有作者本人可以修改 (UPDATE)。
性能 (Performance)：
海报图片需进行压缩上传，不超过 2MB。
向量搜索需要为 embedding 字段建立索引 (HNSW 索引)，保证毫秒级推荐。
易用性 (Usability)：
AI 处理需要 loading 动画提示。
7. 开发路线图 (Roadmap)
Day 1-2：基础设施搭建
创建 Supabase 项目。
搭建 Vue3 前端框架。
设计并建立数据库表 (Profiles, Articles)。
配置 Auth，实现登录注册。
Day 3-4：核心业务开发
完成信息发布页面（包括图片上传到 Supabase Storage）。
完成首页信息流展示（简单的 Select 查询）。
Day 5-6：AI 智能接入 (攻坚)
编写 Edge Function，对接大模型 API。
实现发布文章自动生成摘要。
实现 pgvector 向量存储。
Day 7：推荐与完善
实现“探索模式”推荐逻辑。
UI 美化，测试 RLS 权限是否生效。
录入演示数据（非常重要，录入几条不同学科的数据来测试破壁效果）。
