 InfoCross å·¥ç¨‹ç»“æ„è§„èŒƒ v1.0
æ ¸å¿ƒåŸåˆ™ï¼š
å…³æ³¨ç‚¹åˆ†ç¦» (Separation of Concerns): è§†å›¾ã€é€»è¾‘ã€æ•°æ®è¯·æ±‚ä¸¥æ ¼åˆ†å±‚ã€‚
ç±»å‹å®‰å…¨ (Type Safety): å…¨é¢é‡‡ç”¨ TypeScriptï¼Œæ‹’ç» anyã€‚
ä»£ç å³åŸºç¡€è®¾æ–½ (IaC): æ•°æ®åº“ç»“æ„å’Œæƒé™ç­–ç•¥å¿…é¡»é€šè¿‡ SQL æ–‡ä»¶ç®¡ç†ï¼Œè€Œéæ‰‹åŠ¨åœ¨æ§åˆ¶å°ç‚¹å‡»ã€‚
1. æ ¹ç›®å½•ç»“æ„ (Root Directory)
é¡¹ç›®æ ¹ç›®å½•ä¸ä»…åŒ…å«ä»£ç ï¼Œè¿˜åŒ…å«å·¥ç¨‹åŒ–é…ç½®ã€‚
code
Text
info-cross/
â”œâ”€â”€ .vscode/               # VS Code å·¥ä½œåŒºè®¾ç½® (ç»Ÿä¸€å›¢é˜Ÿç¼–è¾‘å™¨é…ç½®)
â”œâ”€â”€ public/                # çº¯é™æ€èµ„æº (favicon, robots.txt)
â”œâ”€â”€ docs/                  # é¡¹ç›®æ–‡æ¡£ (PRD, UIè§„èŒƒ, ç­”è¾©PPT)
â”œâ”€â”€ src/                   # [æ ¸å¿ƒ] å‰ç«¯æºä»£ç  (Vue 3)
â”œâ”€â”€ supabase/              # [æ ¸å¿ƒ] åç«¯åŸºç¡€è®¾æ–½ (Serverless)
â”œâ”€â”€ .env.local             # ç¯å¢ƒå˜é‡ (API Keys - ç»å¯¹ä¸è¦æäº¤åˆ° Git)
â”œâ”€â”€ .eslintrc.cjs          # ä»£ç è´¨é‡æ£€æŸ¥è§„åˆ™
â”œâ”€â”€ .prettierrc.json       # ä»£ç æ ¼å¼åŒ–è§„åˆ™
â”œâ”€â”€ index.html             # å…¥å£ HTML
â”œâ”€â”€ package.json           # ä¾èµ–ç®¡ç†
â”œâ”€â”€ tailwind.config.js     # æ ·å¼é…ç½®
â”œâ”€â”€ tsconfig.json          # TypeScript é…ç½®
â””â”€â”€ vite.config.ts         # æ„å»ºå·¥å…·é…ç½®
2. å‰ç«¯æ¶æ„ (/src) â€”â€” æ¨¡å—åŒ–è®¾è®¡
æˆ‘ä»¬é‡‡ç”¨ Feature-First (ç‰¹æ€§ä¼˜å…ˆ) ä¸ Layered (åˆ†å±‚) ç›¸ç»“åˆçš„ç»“æ„ã€‚
code
Text
src/
â”œâ”€â”€ api/                   # [Service Layer] å°è£… Supabase æ•°æ®è¯·æ±‚
â”‚   â”œâ”€â”€ article.ts         # æ–‡ç« ç›¸å…³çš„ CRUD
â”‚   â”œâ”€â”€ auth.ts            # ç™»å½•æ³¨å†Œé€»è¾‘
â”‚   â””â”€â”€ interaction.ts     # ç‚¹èµã€è¯„è®ºé€»è¾‘
â”‚
â”œâ”€â”€ assets/                # ç¼–è¯‘æœŸé™æ€èµ„æº
â”‚   â”œâ”€â”€ fonts/             # Inter, JetBrains Mono å­—ä½“æ–‡ä»¶
â”‚   â””â”€â”€ styles/            # å…¨å±€ CSS (Tailwind è‡ªå®šä¹‰æŒ‡ä»¤)
â”‚
â”œâ”€â”€ components/            # [UI Layer] é€šç”¨ç»„ä»¶ (ç¬¨ç»„ä»¶ï¼Œåªè´Ÿè´£æ¸²æŸ“)
â”‚   â”œâ”€â”€ common/            # å…¨å±€é€šç”¨ (Button, Input, Modal)
â”‚   â”œâ”€â”€ layout/            # å¸ƒå±€ç»„ä»¶ (Navbar, Sidebar)
â”‚   â””â”€â”€ business/          # ä¸šåŠ¡å¤ç”¨ç»„ä»¶ (ArticleCard, TagBadge)
â”‚
â”œâ”€â”€ composables/           # [Logic Layer] Vue Hooks (å¤ç”¨é€»è¾‘)
â”‚   â”œâ”€â”€ useTheme.ts        # ä¸»é¢˜åˆ‡æ¢é€»è¾‘
â”‚   â””â”€â”€ useAuth.ts         # ç”¨æˆ·çŠ¶æ€è·å–
â”‚
â”œâ”€â”€ router/                # è·¯ç”±é…ç½®
â”‚   â”œâ”€â”€ index.ts           # è·¯ç”±å®ˆå« (Permission Guard)
â”‚   â””â”€â”€ routes.ts          # è·¯ç”±è¡¨å®šä¹‰
â”‚
â”œâ”€â”€ stores/                # [State Layer] Pinia çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ userStore.ts       # å…¨å±€ç”¨æˆ·ä¿¡æ¯
â”‚   â””â”€â”€ uiStore.ts         # å…¨å±€ UI çŠ¶æ€ (Sidebarå¼€å…³, LoadingçŠ¶æ€)
â”‚
â”œâ”€â”€ types/                 # TypeScript ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ supabase.ts        # Supabase è‡ªåŠ¨ç”Ÿæˆçš„æ•°æ®åº“ç±»å‹
â”‚   â””â”€â”€ models.ts          # å‰ç«¯ä¸šåŠ¡æ¨¡å‹æ¥å£
â”‚
â”œâ”€â”€ utils/                 # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ date.ts            # æ—¶é—´æ ¼å¼åŒ–
â”‚   â””â”€â”€ ai-parser.ts       # å¤„ç† AI è¿”å›çš„ Markdown/JSON
â”‚
â”œâ”€â”€ views/                 # [Page Layer] é¡µé¢çº§ç»„ä»¶ (æ™ºèƒ½ç»„ä»¶ï¼Œè´Ÿè´£ç»„è£…)
â”‚   â”œâ”€â”€ auth/              # ç™»å½•æ³¨å†Œé¡µ
â”‚   â”œâ”€â”€ home/              # é¦–é¡µ (ç ´å£æ¨èæµ)
â”‚   â”œâ”€â”€ publish/           # å‘å¸ƒé¡µ
â”‚   â””â”€â”€ profile/           # ä¸ªäººä¸­å¿ƒ
â”‚
â”œâ”€â”€ App.vue                # æ ¹ç»„ä»¶
â””â”€â”€ main.ts                # å…¥å£æ–‡ä»¶ (æŒ‚è½½ Vue, Pinia, Router)
å…³é”®è§„èŒƒè¯´æ˜ï¼š
Views vs Components: views ä¸‹çš„æ–‡ä»¶å¯¹åº”è·¯ç”±é¡µé¢ï¼Œè´Ÿè´£è·å–æ•°æ®ï¼›components ä¸‹çš„æ–‡ä»¶åªé€šè¿‡ props æ¥æ”¶æ•°æ®å¹¶æ¸²æŸ“ï¼Œä¸ç›´æ¥è¯·æ±‚ APIã€‚
API Layer: é¡µé¢ä¸­ç»å¯¹ç¦æ­¢ç›´æ¥å‡ºç° supabase.from('table').select()ã€‚å¿…é¡»å°è£…åœ¨ api/ ç›®å½•ä¸­ï¼Œä¾‹å¦‚ api/article.ts æš´éœ² fetchArticles() æ–¹æ³•ã€‚
3. åç«¯æ¶æ„ (/supabase) â€”â€” Serverless æ¨¡å¼
è¿™æ˜¯ Supabase é¡¹ç›®ç‰¹æœ‰çš„ç»“æ„ï¼Œä»£è¡¨äº†æœ€å…ˆè¿›çš„ BaaS å¼€å‘æ¨¡å¼ã€‚
code
Text
supabase/
â”œâ”€â”€ functions/             # [Edge Functions] è¾¹ç¼˜å‡½æ•° (åç«¯ä¸šåŠ¡é€»è¾‘)
â”‚   â”œâ”€â”€ _shared/           # å‡½æ•°é—´çš„å…±äº«ä»£ç  (å¦‚ CORS è®¾ç½®)
â”‚   â”œâ”€â”€ analyze-article/   # AI æ‘˜è¦ä¸æ‰“æ ‡ (è°ƒç”¨ OpenAI/é€šä¹‰åƒé—®)
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â””â”€â”€ recommend/         # å‘é‡æ¨èé€»è¾‘
â”‚       â””â”€â”€ index.ts
â”‚
â”œâ”€â”€ migrations/            # [Database] æ•°æ®åº“å˜æ›´è®°å½• (SQL)
â”‚   â”œâ”€â”€ 20231001_init.sql  # åˆå§‹åŒ–è¡¨ç»“æ„ (Profiles, Articles)
â”‚   â””â”€â”€ 20231005_vector.sql# å¼€å¯ pgvector æ’ä»¶
â”‚
â”œâ”€â”€ seed.sql               # æµ‹è¯•æ•°æ® (æ¼”ç¤ºç”¨çš„å‡æ•°æ®)
â””â”€â”€ config.toml            # Supabase æœ¬åœ°å¼€å‘é…ç½®
å…³é”®è§„èŒƒè¯´æ˜ï¼š
Migrations (è¿ç§»): ä¸¥ç¦æ‰‹åŠ¨åœ¨ Supabase ç½‘é¡µæ§åˆ¶å°å»ºè¡¨ã€‚æ‰€æœ‰æ•°æ®åº“å˜åŠ¨å¿…é¡»å†™æˆ .sql æ–‡ä»¶å­˜æ”¾åœ¨ migrations ç›®å½•ä¸‹ã€‚è¿™ä¿è¯äº†ä½ çš„é¡¹ç›®å¯ä»¥åœ¨ä»»ä½•ä¸€å°ç”µè„‘ä¸Šä¸€é”®å¤åŸã€‚
Edge Functions: å¤„ç†æ‰€æœ‰æ¶‰åŠ AI Key å’Œå¤æ‚è®¡ç®—çš„é€»è¾‘ï¼Œä¸è¦æ”¾åœ¨å‰ç«¯ã€‚
4. å‘½åè§„èŒƒ (Naming Conventions) â€”â€” ä¸¥æ ¼æ‰§è¡Œ
ä¸ºäº†ä½“ç°ä¸“ä¸šæ€§ï¼Œå¿…é¡»ç»Ÿä¸€å‘½åé£æ ¼ã€‚
ç±»å‹	è§„èŒƒ	ç¤ºä¾‹
ç›®å½• (Directories)	kebab-case (çŸ­æ¨ªçº¿)	components, analyze-article
Vue æ–‡ä»¶ (.vue)	PascalCase (å¤§é©¼å³°)	ArticleCard.vue, NavBar.vue
TS/JS æ–‡ä»¶ (.ts)	camelCase (å°é©¼å³°)	useAuth.ts, main.ts
CSS/Asset æ–‡ä»¶	kebab-case (çŸ­æ¨ªçº¿)	global-style.css, logo-white.svg
å˜é‡/å‡½æ•°	camelCase (å°é©¼å³°)	fetchData, userInfo
å¸¸é‡	UPPER_SNAKE_CASE	MAX_UPLOAD_SIZE, API_BASE_URL
æ•°æ®åº“è¡¨å	snake_case (ä¸‹åˆ’çº¿/å¤æ•°)	profiles, article_tags
5. å¼€å‘æµç¨‹è§„èŒƒ (Workflow)
è¦åœ¨å®è®­ä¸­è¡¨ç°å‡ºâ€œå›¢é˜Ÿåä½œâ€çš„æ„Ÿè§‰ï¼Œè¯·ä¸¥æ ¼éµå®ˆä»¥ä¸‹ Git æµç¨‹ï¼š
åˆ†æ”¯ç®¡ç†:
main: ç”Ÿäº§ç¯å¢ƒåˆ†æ”¯ï¼ˆæ°¸è¿œä¿æŒå¯è¿è¡Œï¼‰ã€‚
dev: å¼€å‘ä¸»åˆ†æ”¯ã€‚
feat/feature-name: åŠŸèƒ½åˆ†æ”¯ï¼ˆå¦‚ feat/ai-summaryï¼‰ã€‚
Commit ä¿¡æ¯è§„èŒƒ (Conventional Commits):
feat: å¢åŠ AIæ‘˜è¦ç”ŸæˆåŠŸèƒ½
fix: ä¿®å¤é¦–é¡µå¸ƒå±€åœ¨ç§»åŠ¨ç«¯é”™ä½çš„é—®é¢˜
style: è°ƒæ•´å¡ç‰‡åœ†è§’å’Œé˜´å½±
refactor: é‡æ„APIè¯·æ±‚å±‚
docs: æ›´æ–°READMEæ–‡æ¡£
å¼€å‘æ­¥éª¤:
ä» dev åˆ‡å‡ºæ–°åˆ†æ”¯ feat/xxxã€‚
åœ¨ api/ å®šä¹‰æ¥å£ã€‚
åœ¨ components/ å¼€å‘ UI ç»„ä»¶ã€‚
åœ¨ views/ ç»„è£…é¡µé¢å¹¶è”è°ƒæ•°æ®ã€‚
æäº¤ä»£ç ï¼Œåˆå¹¶å› devã€‚
6. ä»£ç è´¨é‡æ§åˆ¶ (Quality Assurance)
åœ¨ package.json ä¸­é…ç½®ä»¥ä¸‹è„šæœ¬ï¼Œå¹¶åœ¨æ¯æ¬¡æäº¤å‰è¿è¡Œï¼š
code
JSON
"scripts": {
  "dev": "vite",
  "build": "vue-tsc && vite build",  // å¼ºåˆ¶ç±»å‹æ£€æŸ¥
  "preview": "vite preview",
  "lint": "eslint . --ext .vue,.js,.jsx,.cjs,.mjs,.ts,.tsx,.cts,.mts --fix",
  "format": "prettier --write ."
}
TypeScript: ä¸¥ç¦ä½¿ç”¨ anyã€‚å¦‚æœä¸çŸ¥é“ç±»å‹ï¼Œå…ˆå®šä¹‰ interface æˆ–è€…ä½¿ç”¨ unknownã€‚
Prettier: å¿…é¡»é…ç½®ä¿å­˜è‡ªåŠ¨æ ¼å¼åŒ–ï¼Œä¿è¯å…¨é¡¹ç›®ç¼©è¿›ã€å¼•å·é£æ ¼ç»Ÿä¸€ã€‚
ğŸ’¡ ä¸ºä»€ä¹ˆè¿™ä¹ˆåšï¼Ÿ
å¦‚æœè€å¸ˆé—®ä½ ï¼šâ€œä¸ºä»€ä¹ˆä½ çš„é¡¹ç›®ç»“æ„è¿™ä¹ˆå¤æ‚ï¼Ÿâ€
ä½ å¯ä»¥è¿™æ ·å›ç­”ï¼š
â€œè€å¸ˆï¼Œæˆ‘å‚è€ƒäº† Domain-Driven Design (é¢†åŸŸé©±åŠ¨è®¾è®¡) å’Œ Modern Monorepo çš„å·¥ç¨‹æ ‡å‡†ã€‚
æˆ‘å°† API å±‚ å•ç‹¬æŠ½ç¦»æ˜¯ä¸ºäº†è§£è€¦è§†å›¾å’Œæ•°æ®ï¼›
æˆ‘ä½¿ç”¨ Supabase Migrations ç®¡ç†æ•°æ®åº“æ˜¯ä¸ºäº†å®ç° Infrastructure as Code (åŸºç¡€è®¾æ–½å³ä»£ç )ï¼›
è¿™ç§ç»“æ„ä¸ä»…ä¸ºäº†ç°åœ¨çš„å®è®­ï¼Œæ›´æ˜¯ä¸ºäº†æ¨¡æ‹ŸçœŸå®ä¼ä¸šçº§é«˜å¯ç»´æŠ¤ã€é«˜æ‰©å±•æ€§çš„å¼€å‘ç¯å¢ƒã€‚â€
è¿™æ®µè¯ä¸€å‡ºï¼Œä½ çš„ä¸“ä¸šåº¦ç›´æ¥æ‹‰æ»¡ã€‚